<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>jQuery Ajax</title>
    <style>
        body {
            padding: 50px;
            font-size: 14px;
        }

        .orders {
            padding: 0;

        }

        .orders li {
            list-style: none;
            background-color: #cccccc;
            margin-bottom: 10px;
            padding: 10px;
        }
    </style>
</head>

<body>
    <h1>jQuery Ajax</h1>
    <ul class="orders">
    </ul>
    <H4>添加新的点餐列表</H4>
    <p>name:<input type="text" id="name"></p>
    <p>drink:<input type="text" id="drink"></p>
    <button id="add-order">Add!</button>
    <script src="js/jquery.min.js"></script>
    <script>
        $(function () {
            var $orders = $('.orders')
            $.ajax({
                type: 'GET',
                url: 'http://rest.learncode.academy/api/learncode/friends',
                success: function (res) {
                    console.log(res)
                    $.each(res,function(i,order){
                        addOrder(order)
                    })
                }
            })
            $('#add-order').on('click',function(){
                var order={
                name:$('#name').val(),
                drink:$('#drink').val(),
            }
            console.log(order)
            $.ajax({
                type:'POST',
                url:'http://rest.learncode.academy/api/learncode/friends',
                data:order,
                success:function(newOrder){
                    addOrder(newOrder)
                },error:function(){
                    alert('err...')
                }
            })
            })
            // 动态生成li
            function addOrder(order){
                $orders.append('<li>Name:'+order.name+'Drink:'+order.drink+'</li>')
            }
        })
    </script>
</body>

</html>